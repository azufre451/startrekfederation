<html xmlns="http://www.w3.org/1999/xhtml">
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<head>
	<meta http-equiv="Content-Type" content="text/html;charset=utf-8"/>	
	<meta name="google" value="notranslate" />

	<link rel="shortcut icon" href="favicon.ico" />
	<link href="TEMPLATES/css/cdb.css?v=${gameOptions/numericVersion}" rel="stylesheet" type="text/css" />
	<link href="TEMPLATES/css/interface.css?v=${gameOptions/numericVersion}" rel="stylesheet" type="text/css" />
	<link href="TEMPLATES/css/jquery-ui.css" rel="stylesheet" type="text/css" />

	<script type="text/javascript" src="TEMPLATES/js/jquery-3.6.0.min.js" />
	
	<script type="text/javascript" src="TEMPLATES/js/JU.js" />
	<script type="text/javascript" src="TEMPLATES/js/initiator.js?v=${gameOptions/numericVersion}"/>

	<title>STAR TREK FEDERATION - CDB</title>

	<script>
		function orgaView(ida){
			jQuery('.sliding').fadeOut(120).promise().done( function(){jQuery('#orga_'+ida).fadeIn(120);});

		}

		function opng(ide){

			if (ide.checked)
				jQuery('.pngLine, .fpngLine').fadeIn(120);
			else jQuery('.pngLine, .fpngLine').fadeOut(120);
		}
			
		function searchIncarichiFunction(par)
		{
			return function(request, response) {
				
				jQuery.ajax({
					type: "POST",
					url:"ajax_gradiGedder.php",
					data: {
						term:request.term,
						desiredPar: par,
						place:jQuery('#assegnazione').val(),
						section:jQuery('#sectionWhat').val(),
						dep:jQuery('#departmentWhat').val(),
						div:jQuery('#divisionWhat').val(),
						group:jQuery('#groupWhat').val(),
						incarico:jQuery('#incIncarico').val()
					},
					success: response,
					dataType: 'json'
					});
			}
		}

		jQuery(function(){
			//jQuery('#sectionWhat').autocomplete({source: "ajax_gradiGedder.php?sezioni=do",	minLength: 2});
			//jQuery('#departmentWhat').autocomplete({source: "ajax_gradiGedder.php?dipartimenti=do",	minLength: 2});
			//jQuery('#divisionWhat').autocomplete({source: "ajax_gradiGedder.php?divisioni=do",	minLength: 2});
			//jQuery('#groupWhat').autocomplete({source: "ajax_gradiGedder.php?gruppi=do",	minLength: 2});


			jQuery('#sectionWhat').autocomplete({source: searchIncarichiFunction('sezioni'),minLength: 2, appendTo: '#newPNG'});
			jQuery('#departmentWhat').autocomplete({source: searchIncarichiFunction('dipartimenti'),minLength: 2, appendTo: '#newPNG'});
			jQuery('#divisionWhat').autocomplete({source: searchIncarichiFunction('divisioni'),	minLength: 2, appendTo: '#newPNG'});		
			jQuery('#groupWhat').autocomplete({source: searchIncarichiFunction('gruppi'), minLength: 2, appendTo: '#newPNG'});
			jQuery('#incIncarico').autocomplete({source: searchIncarichiFunction('incarichi'), minLength: 2, appendTo: '#newPNG'});
			
			jQuery('.tooltip').tooltip({
          content: function () {
              return jQuery(this).prop('title');
          	}
      		});
	

		});
	
	</script>
	<style>

	.ui-tooltip {
	font-size:12px;
	text-align:justify;
  }
  	.ui-tooltip-content span {
	font-weight:bold;
  }
  .im1{vertical-align: middle}

		.sbtn{
			border:1px solid #777;
			border-radius:6px;
			color:#666;
			font-size:12px;
			height:15px;
			line-height: 15px;
			width:80px;
			padding:2px 5px;
			font-weight:bold; 
			padding:5px;
			cursor:pointer;
			margin-left:5px;
			text-align:center;
			text-transform: uppercase;

		}
		.sbtn:hover{background-color:#FFF; color:black !important;}

		.sccolRed, a.ccolRed,p.ccolRed{ color:red; }
		.sccolGre, a.ccolGre,p.ccolGre{ color:#6fbf22; }
		.sccolYelo, a.ccolYelo,p.ccolYelo{ color:#FFCC00; }
		.sccolBlue, a.ccolBlue,p.ccolBlue{ color:#2264bf; }
		.sccolTeal, a.ccolTeal,p.ccolTeal{ color:teal; }

		
		
		
		
		

 		p.dipGroup.ccolRed,p.dipGroup.ccolGre,p.dipGroup.ccolYelo,p.dipGroup.ccolBlue,p.dipGroup.ccolTeal{color:#BBB;}


		p.dipGroup.ccolRed{ text-decoration-color:red; }
		p.dipGroup.ccolGre{ text-decoration-color:#6fbf22; }
		p.dipGroup.ccolYelo{ text-decoration-color:#FFCC00; }
		p.dipGroup.ccolBlue{ text-decoration-color:#2264bf; }
		p.dipGroup.ccolTeal{ text-decoration-color:teal; }

 		div.dipGroup{padding-left:10px; margin-left:20px; padding-left:5px; border-left:2px solid black;}

		.pre_dipGroup div.dipGroup.ccolRed{ border-color:red; }
		.pre_dipGroup div.dipGroup.ccolGre{ border-color:#6fbf22; }
		.pre_dipGroup div.dipGroup.ccolYelo{ border-color:#FFCC00; }
		.pre_dipGroup div.dipGroup.ccolBlue{ border-color:#2264bf; }
		.pre_dipGroup div.dipGroup.ccolTeal{ border-color:teal; }

		.pre_dipGroup{margin-left:40px;}

		.sbtn.ccolRed{  border-color:red; }
		.sbtn.ccolGre{  border-color:#6fbf22; }
		.sbtn.ccolYelo{ border-color:#FFCC00; }
		.sbtn.ccolBlue{ border-color:#2264bf; }
		.sbtn.ccolTeal{ border-color:teal; }

		.sanik:hover{ color:red; }

		.pngLine,.fpngLine{display:block;}
		.pgLine,.pngLine,.fpngLine {text-transform: uppercase; font-size:11px;}
		
		.fpngLine .itu, .pngLine .itu{color:#777;}
		.pngLine .itu{text-decoration: underline;}

		.pgLineCommand{border-top: 1px solid #333; border-bottom: 1px solid #333; padding:10px 5px;}
		.pgLineCommand.ccolRed{  border-color:red; }
		.pgLineCommand.ccolGre{  border-color:#6fbf22; }
		.pgLineCommand.ccolYelo{ border-color:#FFCC00; }
		.pgLineCommand.ccolBlue{ border-color:#2264bf; }
		.pgLineCommand.ccolTeal{ border-color:teal; }

		.ui-autocomplete {max-height: 135px;overflow-y: auto;overflow-x: hidden;padding-right: 1px;}
		.ui-autocomplete li {padding:2px;font-size:12px;} 
	</style>
</head>

<body style="background-repeat:no-repeat; background-color:black; background-position:top center;">


<div id="federation_interfaceContainer">
	<div id="leftCol" style="width:123px;">
		<div id="leftC1" />
		<div id="leftC3" />
	</div>
	
	<div id="supCol">
		
		<div metal:use-macro="TEMPLATES/metal.htm/cdbHeading" />

	</div>
	
	<div id="fillerBax">
		<div id="barbot1" />
	</div>
	<div id="cdbContainer" >
	<div metal:use-macro="TEMPLATES/metal.htm/cdbIntro" />

	<div style="font-size:12px;  margin-left:5px; text-transform:uppercase; "><a href="cdb.php" class="interfaceLink">CDB</a> <span style="color:red; font-size:11px;">></span> <a class="interfaceLink" tal:attributes="href string:crew.php">EQUIPAGGI</a> <span style="color:red; font-size:11px;">></span> <span style="text-transform:uppercase;" class="interfaceLink" tal:content="place/placeName" /></div>

<div style="width:auto; border:1px solid white; margin-top:10px; height:120px;">
		<div style="float:left; width:200px; height:100%;"><img src="TEMPLATES/img/logo/${place/placeLittle}" /></div>
		<div style="margin-right:20px;  text-align:center; font-family:Arial; font-variant:small-caps; font-width:bold; margin-left:210px; height:100%;">
			<p style="font-size:28px;" tal:content="place/placeName"/>
			<p style="font-size:18px; font-style:italic;" tal:content="place/placeMotto"/> 

			<p style="font-size:14px; text-align:right; position:relative; font-style:italic;"> <span tal:content="structure place/placeClass"/><span tal:content="string:, ${place/placePopulation}" tal:condition="php:place['placeType'] == 'Pianeta'"/></p>
			<p style="font-size:14px; text-align:right; position:relative; font-style:italic;"  tal:condition="php:place['placeType'] == 'Pianeta'"> <span tal:content="place/placeAlignment"/></p>

			<p style="font-size:14px; text-align:right;  font-style:italic;" tal:condition="php:(place['commander'] != '')">
				<img tal:attributes="src string:TEMPLATES/img/ranks/${place/uniform}.png" style="vertical-align:middle;" />
				<span tal:content="structure place/commander" />
			</p>
		</div>	
		
		<div id='cdber' style="position:absolute; top:90px; left:210px; text-align:right;">
			<p tal:condition="php:place['catGDB']" style="margin:0px; margin-top:5px;"><a tal:attributes="href string:cdb.php?cat=${place/catGDB}"><img src="TEMPLATES/img/interface/tdisposizioni_2.png" /></a></p>		
			<p tal:condition="php:place['catGDB']" style="margin:0px; margin-top:5px;"><a tal:attributes="href string:cdb.php?cat=${place/catDISP}"><img src="TEMPLATES/img/interface/tgiornale_2.png" /></a></p>
			<!--<p style="margin:0px; margin-top:5px;"><a tal:attributes="href string:cdb.php?cat=${place/catRAP}"><img src="TEMPLATES/img/interface/trapporti_2.png"  /></a></p>-->
		</div>
</div>

<div style="text-align:center; margin-top:20px; font-family:Helvetica">
<a tal:repeat="sezione personale" tal:attributes="onclick php:'orgaView(\'' . str_replace(' ','_',repeat.sezione.key) . '\')' ; class php:(array_key_exists(repeat.sezione.key,ccol) ? 'sbtn'.' '.ccol[repeat.sezione.key] : 'sbtn')" tal:content="php:(array_key_exists(repeat.sezione.key,clab) ? clab[repeat.sezione.key] : substr(repeat.sezione.key,0,4) )" />

<p style="display:inline-block; float:right; margin-right:10px;"><input type="checkbox" checked="checked" onclick="opng(this)" /> Mostra i PnG</p>
</div>

<div id="local" class="topicDiv">

 


	<div style="clear:both" />
	<div tal:repeat="sezione personale" style="margin-top:10px; font-family: Helvetica; display:none;" class='sliding' tal:attributes="id php:'orga_' .  str_replace(' ','_',repeat.sezione.key)">
		
		<div style="text-align:center;" class="pgLine" >
			

				<img tal:attributes="src php:(array_key_exists(repeat.sezione.key,cclogos) ? 'TEMPLATES/img/logo/divisions/'.cclogos[repeat.sezione.key] : '')" style="width:130px;" />

		
				<p tal:attributes="class php:(array_key_exists(repeat.sezione.key,ccol) ? ccol[repeat.sezione.key] : '')" tal:content="string: Sezione ${repeat/sezione/key}" style="margin-top:20px; font-size:14px;"/>
		</div>
		<div style="clear:both" />

		<div tal:repeat="divisione sezione" style="margin:10px 10px; border-bottom:1px solid #444;">
			
			<p tal:attributes="class php:(array_key_exists(repeat.sezione.key,ccol) ? ccol[repeat.sezione.key] : '')" tal:content="string:  » Divisione ${repeat/divisione/key} «" style="margin-bottom:5px; text-align:center;" tal:condition="php:(repeat.divisione.key != '')"/>

			<div tal:repeat="dipartimento divisione" style="margin:40px;" tal:attributes="class php:(strstr(repeat.dipartimento.key,'Comando')) ? 'pgLine pgLineCommand ' . (array_key_exists(repeat.sezione.key,ccol) ? ccol[repeat.sezione.key] : '') : 'pgLine'">
				

				<p tal:content="php:(strstr(repeat.dipartimento.key,'Comando')) ? repeat.dipartimento.key : 'DIP. ' . repeat.dipartimento.key" tal:condition="php:(repeat.dipartimento.key != '')" tal:attributes="class php:(array_key_exists(repeat.sezione.key,ccol) ? ccol[repeat.sezione.key] : '')" style="margin-bottom:5px;"  />

				<div tal:repeat="dipGroup dipartimento" tal:attributes="class php:(repeat.dipGroup.key != '') ? 'pre_dipGroup' : ''">

					<p tal:content="string:Squadra/Unità ${repeat/dipGroup/key}" tal:condition="php:(repeat.dipGroup.key != '')" tal:attributes="class php:(array_key_exists(repeat.sezione.key,ccol) ? 'dipGroup ' . ccol[repeat.sezione.key] : '')" style="margin-bottom:5px; margin-top:10px;"  />

					<div tal:attributes="class php:(array_key_exists(repeat.sezione.key,ccol) ? 'dipGroup ' . ccol[repeat.sezione.key] : '')">

					<p tal:repeat="person dipGroup" tal:attributes="class php:((person['png'] && person['pgID'] == 0) ? 'fpngLine' : ((person['png'] ? 'pngLine' : 'rpgLine')))" >

						<span style="display:inline-block; width:10px;" >
							<a tal:attributes="href string:crew.php?editAssign=${person/recID}&equia=${equi} " tal:condition="php:(userM == 'yes' && person['png'] && person['pgID'] == 0)"><img src="TEMPLATES/img/interface/edit.png" style="vertical-align:middle;"/></a>

						</span>
						
						<img style="vertical-align:middle;" tal:attributes="src string:TEMPLATES/img/ranks/${person/ordinaryUniform}.png ; title string:${person/pgGrado} - Sezione ${person/pgSezione}" />
						
						<img style="vertical-align:middle; vertical-align:middle;" tal:attributes="src php:(person['pgSesso'] == 'M') ? 'TEMPLATES/img/specie/' . person['pgSpecie'] . '_m.png' : ((person['pgSesso'] == 'F') ? 'TEMPLATES/img/specie/' . person['pgSpecie'] . '_f.png' : 'TEMPLATES/img/specie/' . person['pgSpecie'] . '_t.png' ) ; title php:(person['pgSesso'] == 'M') ? person['pgSpecie'] . ' - Maschio' : ((person['pgSesso'] == 'F') ? person['pgSpecie'] . ' - Femmina' : person['pgSpecie'] . ' - Terzo Genere' )"  />
						
						<a tal:omit-tag="php:(person['pgID'] == 0)" tal:attributes="href string:javascript:schedaPOpen(${person/pgID}) ; title php:(userSL) ? 'ULTIMO LOGIN: ' . date('d-m-Y H:i:s',person['pgLastAct']) : ''"><span class="itu" tal:content="string: ${person/pgNomeSuff} ${person/pgUser}, ${person/pgNomeC}" /></a> 

			
					<span  tal:attributes="class php:(array_key_exists(repeat.sezione.key,ccol) ? ccol[repeat.sezione.key] : '')" style=" font-weight:bold;">></span> <span tal:content="structure person/incIncarico">INCARICO</span>

					<span tal:condition="php:(person['pgPrestige'] GT 0)">[ <img tal:attributes="src string:TEMPLATES/img/interface/personnelInterface/notori_image_${person/pgPrestige}.png ; title php:('<span class=\'' . (array_key_exists(repeat.sezione.key,ccol) ? 's'.ccol[repeat.sezione.key] : '') . '\' >' . prestigioLabels[person['pgPrestige']]['name'] . '</span><br/>' . prestigioLabels[person['pgPrestige']]['desc']) ; class php:(array_key_exists(repeat.sezione.key,ccol) ? 'tooltip im1 ' . ccol[repeat.sezione.key] : 'tooltip im1')" /> ]</span>
						
	 
					</p>
					</div>
				</div>
			</div>
		</div>
	</div>

		 
</div>
	
	<p style="color:white;"><a class="interfaceLink" href="javascript:void(0);" onclick="javascript:jQuery('#newPNG').fadeIn();" tal:condition="php:(userM == 'yes')"> Aggiungi PnG</a></p>


<div metal:use-macro="TEMPLATES/cdb_organigramma_metal.htm/newPNG" />

</div>

</div>






</body>
</html>